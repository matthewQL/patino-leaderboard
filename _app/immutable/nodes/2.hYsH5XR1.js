import{r as de,s as me,n as O,o as pe,f as B}from"../chunks/scheduler.KIPEeUFd.js";import{t as ge,S as ve,i as ke,e as I,s as D,b as W,m as j,c as R,d as $,y as be,h as H,f as z,g as L,o as w,j as K,k as b,l as V,z as Q,A as re,B as ce}from"../chunks/index.J_QwpNmo.js";const we=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function S(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function fe(s,l){s.d(1),l.delete(s.key)}function he(s,l,e,t,n,f,m,i,r,d,p,_){let c=s.length,k=f.length,E=c;const T={};for(;E--;)T[s[E].key]=E;const v=[],h=new Map,P=new Map,N=[];for(E=k;E--;){const g=_(n,f,E),M=e(g);let u=m.get(M);u?N.push(()=>u.p(g,l)):(u=d(M,g),u.c()),h.set(M,v[E]=u),M in T&&P.set(M,Math.abs(E-T[M]))}const o=new Set,y=new Set;function a(g){ge(g,1),g.m(i,p),m.set(g.key,g),p=g.first,k--}for(;c&&k;){const g=v[k-1],M=s[c-1],u=g.key,U=M.key;g===M?(p=g.first,c--,k--):h.has(U)?!m.has(u)||o.has(u)?a(g):y.has(U)?c--:P.get(u)>P.get(U)?(y.add(u),a(g)):(o.add(U),c--):(r(M,m),c--)}for(;c--;){const g=s[c];h.has(g.key)||r(g,m)}for(;k;)a(v[k-1]);return de(N),v}const{Map:ue}=we;function X(s,l,e){const t=s.slice();return t[10]=l[e],t[12]=e,t}function Y(s,l,e){const t=s.slice();return t[13]=l[e],t}function J(s,l,e){const t=s.slice();return t[16]=l[e],t}function Z(s,l,e){const t=s.slice();return t[19]=l[e],t[12]=e,t}function x(s,l,e){const t=s.slice();return t[12]=l[e],t}function ee(s){let l,e,t,n=s[0]-s[12]+"",f,m,i,r;function d(){return s[6](s[12])}return{c(){l=I("li"),e=I("a"),t=W("Period "),f=W(n),this.h()},l(p){l=R(p,"LI",{});var _=$(l);e=R(_,"A",{href:!0,class:!0});var c=$(e);t=z(c,"Period "),f=z(c,n),c.forEach(L),_.forEach(L),this.h()},h(){w(e,"href",m="/period/"+(s[0]-s[12])),w(e,"class","svelte-r5lpu9")},m(p,_){K(p,l,_),b(l,e),b(e,t),b(e,f),i||(r=re(e,"click",ce(d)),i=!0)},p(p,_){s=p,_&1&&n!==(n=s[0]-s[12]+"")&&V(f,n),_&1&&m!==(m="/period/"+(s[0]-s[12]))&&w(e,"href",m)},d(p){p&&L(l),i=!1,r()}}}function te(s){let l,e=s[0]-s[12]>0&&ee(s);return{c(){e&&e.c(),l=j()},l(t){e&&e.l(t),l=j()},m(t,n){e&&e.m(t,n),K(t,l,n)},p(t,n){t[0]-t[12]>0?e?e.p(t,n):(e=ee(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){t&&L(l),e&&e.d(t)}}}function le(s){let l,e,t,n=s[0]+(s[12]+1)+"",f,m,i,r,d;function p(){return s[7](s[12])}return{c(){l=I("li"),e=I("a"),t=W("Period "),f=W(n),i=D(),this.h()},l(_){l=R(_,"LI",{});var c=$(l);e=R(c,"A",{href:!0,class:!0});var k=$(e);t=z(k,"Period "),f=z(k,n),k.forEach(L),i=H(c),c.forEach(L),this.h()},h(){w(e,"href",m="/period/"+(s[0]+(s[12]+1))),w(e,"class","svelte-r5lpu9")},m(_,c){K(_,l,c),b(l,e),b(e,t),b(e,f),b(l,i),r||(d=re(e,"click",ce(p)),r=!0)},p(_,c){s=_,c&1&&n!==(n=s[0]+(s[12]+1)+"")&&V(f,n),c&1&&m!==(m="/period/"+(s[0]+(s[12]+1)))&&w(e,"href",m)},d(_){_&&L(l),r=!1,d()}}}function se(s){let l,e=s[0]+(s[12]+1)<=s[3]&&le(s);return{c(){e&&e.c(),l=j()},l(t){e&&e.l(t),l=j()},m(t,n){e&&e.m(t,n),K(t,l,n)},p(t,n){t[0]+(t[12]+1)<=t[3]?e?e.p(t,n):(e=le(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){t&&L(l),e&&e.d(t)}}}function ae(s){let l,e=[],t=new ue,n,f=S(s[2][s[0]-1]);const m=i=>i[13].TeamName;for(let i=0;i<f.length;i+=1){let r=Y(s,f,i),d=m(r);t.set(d,e[i]=oe(d,r))}return{c(){l=I("ul");for(let i=0;i<e.length;i+=1)e[i].c();n=D(),this.h()},l(i){l=R(i,"UL",{class:!0});var r=$(l);for(let d=0;d<e.length;d+=1)e[d].l(r);n=H(r),r.forEach(L),this.h()},h(){w(l,"class","teams svelte-r5lpu9")},m(i,r){K(i,l,r);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,null);b(l,n)},p(i,r){r&5&&(f=S(i[2][i[0]-1]),e=he(e,r,m,1,i,f,t,l,fe,oe,n,Y))},d(i){i&&L(l);for(let r=0;r<e.length;r+=1)e[r].d()}}}function ie(s,l){let e,t,n,f,m,i,r=l[16].Name+"",d;return{key:s,first:null,c(){e=I("div"),t=I("img"),m=D(),i=I("p"),d=W(r),this.h()},l(p){e=R(p,"DIV",{class:!0});var _=$(e);t=R(_,"IMG",{src:!0,alt:!0,class:!0}),m=H(_),i=R(_,"P",{class:!0});var c=$(i);d=z(c,r),c.forEach(L),_.forEach(L),this.h()},h(){B(t.src,n="https://drive.google.com/thumbnail?id="+l[16].Photo)||w(t,"src",n),w(t,"alt",f=l[16].Name),w(t,"class","svelte-r5lpu9"),w(i,"class","svelte-r5lpu9"),w(e,"class","team svelte-r5lpu9"),this.first=e},m(p,_){K(p,e,_),b(e,t),b(e,m),b(e,i),b(i,d)},p(p,_){l=p,_&5&&!B(t.src,n="https://drive.google.com/thumbnail?id="+l[16].Photo)&&w(t,"src",n),_&5&&f!==(f=l[16].Name)&&w(t,"alt",f),_&5&&r!==(r=l[16].Name+"")&&V(d,r)},d(p){p&&L(e)}}}function oe(s,l){let e,t,n,f,m,i,r,d=l[13].TeamName+"",p,_,c=[],k=new ue,E=S(l[13].students);const T=v=>v[16].Name;for(let v=0;v<E.length;v+=1){let h=J(l,E,v),P=T(h);k.set(P,c[v]=ie(P,h))}return{key:s,first:null,c(){e=I("li"),t=I("img"),m=D(),i=I("div"),r=I("h3"),p=W(d),_=D();for(let v=0;v<c.length;v+=1)c[v].c();this.h()},l(v){e=R(v,"LI",{class:!0});var h=$(e);t=R(h,"IMG",{src:!0,alt:!0,class:!0}),m=H(h),i=R(h,"DIV",{class:!0});var P=$(i);r=R(P,"H3",{class:!0});var N=$(r);p=z(N,d),N.forEach(L),_=H(P);for(let o=0;o<c.length;o+=1)c[o].l(P);P.forEach(L),h.forEach(L),this.h()},h(){B(t.src,n="https://drive.google.com/thumbnail?id="+l[13].Team)||w(t,"src",n),w(t,"alt",f=l[13].Name),w(t,"class","svelte-r5lpu9"),w(r,"class","svelte-r5lpu9"),w(i,"class","team-data svelte-r5lpu9"),w(e,"class","svelte-r5lpu9"),this.first=e},m(v,h){K(v,e,h),b(e,t),b(e,m),b(e,i),b(i,r),b(r,p),b(i,_);for(let P=0;P<c.length;P+=1)c[P]&&c[P].m(i,null)},p(v,h){l=v,h&5&&!B(t.src,n="https://drive.google.com/thumbnail?id="+l[13].Team)&&w(t,"src",n),h&5&&f!==(f=l[13].Name)&&w(t,"alt",f),h&5&&d!==(d=l[13].TeamName+"")&&V(p,d),h&5&&(E=S(l[13].students),c=he(c,h,T,1,l,E,k,i,fe,ie,null,J))},d(v){v&&L(e);for(let h=0;h<c.length;h+=1)c[h].d()}}}function ne(s){let l,e=s[12]>=s[4]&&s[12]<s[1]&&ae(s);return{c(){e&&e.c(),l=j()},l(t){e&&e.l(t),l=j()},m(t,n){e&&e.m(t,n),K(t,l,n)},p(t,n){t[12]>=t[4]&&t[12]<t[1]?e?e.p(t,n):(e=ae(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){t&&L(l),e&&e.d(t)}}}function Pe(s){let l,e,t="Leaderboard -",n,f,m,i,r,d,p,_,c,k,E=S([3,2,1]),T=[];for(let o=0;o<3;o+=1)T[o]=te(x(s,E,o));let v=S(Array(3)),h=[];for(let o=0;o<v.length;o+=1)h[o]=se(Z(s,v,o));let P=S(s[2]),N=[];for(let o=0;o<P.length;o+=1)N[o]=ne(X(s,P,o));return{c(){l=I("div"),e=I("h1"),e.textContent=t,n=D(),f=I("ul");for(let o=0;o<3;o+=1)T[o].c();m=D(),i=I("li"),r=I("span"),d=W("Period "),p=W(s[0]),_=D();for(let o=0;o<h.length;o+=1)h[o].c();c=D();for(let o=0;o<N.length;o+=1)N[o].c();k=j(),this.h()},l(o){l=R(o,"DIV",{id:!0,class:!0});var y=$(l);e=R(y,"H1",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-ff54wo"&&(e.textContent=t),n=H(y),f=R(y,"UL",{class:!0});var a=$(f);for(let u=0;u<3;u+=1)T[u].l(a);m=H(a),i=R(a,"LI",{});var g=$(i);r=R(g,"SPAN",{class:!0});var M=$(r);d=z(M,"Period "),p=z(M,s[0]),M.forEach(L),g.forEach(L),_=H(a);for(let u=0;u<h.length;u+=1)h[u].l(a);a.forEach(L),y.forEach(L),c=H(o);for(let u=0;u<N.length;u+=1)N[u].l(o);k=j(),this.h()},h(){w(e,"class","svelte-r5lpu9"),w(r,"class","svelte-r5lpu9"),w(f,"class","svelte-r5lpu9"),w(l,"id","pagination"),w(l,"class","svelte-r5lpu9")},m(o,y){K(o,l,y),b(l,e),b(l,n),b(l,f);for(let a=0;a<3;a+=1)T[a]&&T[a].m(f,null);b(f,m),b(f,i),b(i,r),b(r,d),b(r,p),b(f,_);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(f,null);K(o,c,y);for(let a=0;a<N.length;a+=1)N[a]&&N[a].m(o,y);K(o,k,y)},p(o,[y]){if(y&33){E=S([3,2,1]);let a;for(a=0;a<3;a+=1){const g=x(o,E,a);T[a]?T[a].p(g,y):(T[a]=te(g),T[a].c(),T[a].m(f,m))}for(;a<3;a+=1)T[a].d(1)}if(y&1&&V(p,o[0]),y&41){v=S(Array(3));let a;for(a=0;a<v.length;a+=1){const g=Z(o,v,a);h[a]?h[a].p(g,y):(h[a]=se(g),h[a].c(),h[a].m(f,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=v.length}if(y&23){P=S(o[2]);let a;for(a=0;a<P.length;a+=1){const g=X(o,P,a);N[a]?N[a].p(g,y):(N[a]=ne(g),N[a].c(),N[a].m(k.parentNode,k))}for(;a<N.length;a+=1)N[a].d(1);N.length=P.length}},i:O,o:O,d(o){o&&(L(l),L(c),L(k)),Q(T,o),Q(h,o),Q(N,o)}}}let F=1;function Ne(s,l,e){let t,n,f=[],m=[],i=1,r=0,d=0;pe(async()=>{const k="1ktrTyIcfjtdgatYKf5E5hi3gOBzUr2bHnXgfmLFpG8c",E=encodeURIComponent("Leaderboard"),T=`https://docs.google.com/spreadsheets/d/${k}/gviz/tq?tqx=out:csv&sheet=${E}`,h=await(await fetch(T)).text(),[P,...N]=h.split(`
`),o=P.split(",").map(u=>u.replace(/"/g,""));f=N.map(u=>{const U=u.split(",").map(C=>C.replace(/"/g,""));let A=o.map(C=>C.replace(/"/g,"")).reduce((C,q,_e)=>({...C,[q]:U[_e]}),{});if(A.PhotoURL&&A.PhotoURL.startsWith("https://drive.google.com")){let q=new URL(A.PhotoURL).pathname.split("/");A.Photo=q[3]}if(A.TeamURL&&A.TeamURL.startsWith("https://drive.google.com")){let q=new URL(A.TeamURL).pathname.split("/");A.Team=q[3]}return A});let y=new Map,a=new Map,g=new Map;for(let u of f){let U=`${u.Period}`;y.has(U)||y.set(U,new Map);let G=y.get(U),A=`${u.TeamName}`;G.has(A)||G.set(A,u);let C=`${u.TeamName}-${u.Period}`;a.has(C)?a.set(C,a.get(C)+Number(u.Cash)):a.set(C,Number(u.Cash));let q=`${u.TeamName}-${u.Period}`;g.has(q)?g.get(q).push(u):g.set(q,[u])}let M=Array.from(y.values()).map(u=>{let U=Array.from(u.values());return U.sort((G,A)=>a.get(`${A.TeamName}-${A.Period}`)-a.get(`${G.TeamName}-${G.Period}`)),U});for(let u of M)for(let U of u)U.students=g.get(`${U.TeamName}-${U.Period}`);e(2,m=M),r=m.length,e(3,d=Math.ceil(r/F))});const p=k=>{e(0,i=k)},_=k=>p(i-k),c=k=>p(i+(k+1));return s.$$.update=()=>{s.$$.dirty&1&&e(1,t=i*F),s.$$.dirty&2&&e(4,n=t-F)},[i,t,m,d,n,p,_,c]}class Te extends ve{constructor(l){super(),ke(this,l,Ne,Pe,me,{})}}export{Te as component};

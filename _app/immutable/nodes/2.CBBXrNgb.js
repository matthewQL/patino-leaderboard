import{r as _e,s as me,n as O,o as pe,f as B}from"../chunks/scheduler.KIPEeUFd.js";import{t as ge,S as ve,i as ke,e as I,s as D,b as W,m as j,c as R,d as $,y as be,h as H,f as z,g as L,o as w,j as K,k as b,l as V,z as Q,A as re,B as fe}from"../chunks/index.J_QwpNmo.js";const we=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function S(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ce(s,l){s.d(1),l.delete(s.key)}function he(s,l,e,t,n,c,m,i,r,_,p,d){let f=s.length,k=c.length,E=f;const T={};for(;E--;)T[s[E].key]=E;const v=[],h=new Map,P=new Map,N=[];for(E=k;E--;){const g=d(n,c,E),M=e(g);let u=m.get(M);u?N.push(()=>u.p(g,l)):(u=_(M,g),u.c()),h.set(M,v[E]=u),M in T&&P.set(M,Math.abs(E-T[M]))}const o=new Set,y=new Set;function a(g){ge(g,1),g.m(i,p),m.set(g.key,g),p=g.first,k--}for(;f&&k;){const g=v[k-1],M=s[f-1],u=g.key,U=M.key;g===M?(p=g.first,f--,k--):h.has(U)?!m.has(u)||o.has(u)?a(g):y.has(U)?f--:P.get(u)>P.get(U)?(y.add(u),a(g)):(o.add(U),f--):(r(M,m),f--)}for(;f--;){const g=s[f];h.has(g.key)||r(g,m)}for(;k;)a(v[k-1]);return _e(N),v}const{Map:ue}=we;function X(s,l,e){const t=s.slice();return t[10]=l[e],t[12]=e,t}function Y(s,l,e){const t=s.slice();return t[13]=l[e],t}function J(s,l,e){const t=s.slice();return t[16]=l[e],t}function Z(s,l,e){const t=s.slice();return t[19]=l[e],t[12]=e,t}function x(s,l,e){const t=s.slice();return t[12]=l[e],t}function ee(s){let l,e,t,n=s[0]-s[12]+"",c,m,i,r;function _(){return s[6](s[12])}return{c(){l=I("li"),e=I("a"),t=W("Period "),c=W(n),this.h()},l(p){l=R(p,"LI",{});var d=$(l);e=R(d,"A",{href:!0,class:!0});var f=$(e);t=z(f,"Period "),c=z(f,n),f.forEach(L),d.forEach(L),this.h()},h(){w(e,"href",m="/period/"+(s[0]-s[12])),w(e,"class","svelte-fxgp7d")},m(p,d){K(p,l,d),b(l,e),b(e,t),b(e,c),i||(r=re(e,"click",fe(_)),i=!0)},p(p,d){s=p,d&1&&n!==(n=s[0]-s[12]+"")&&V(c,n),d&1&&m!==(m="/period/"+(s[0]-s[12]))&&w(e,"href",m)},d(p){p&&L(l),i=!1,r()}}}function te(s){let l,e=s[0]-s[12]>0&&ee(s);return{c(){e&&e.c(),l=j()},l(t){e&&e.l(t),l=j()},m(t,n){e&&e.m(t,n),K(t,l,n)},p(t,n){t[0]-t[12]>0?e?e.p(t,n):(e=ee(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){t&&L(l),e&&e.d(t)}}}function le(s){let l,e,t,n=s[0]+(s[12]+1)+"",c,m,i,r,_;function p(){return s[7](s[12])}return{c(){l=I("li"),e=I("a"),t=W("Period "),c=W(n),i=D(),this.h()},l(d){l=R(d,"LI",{});var f=$(l);e=R(f,"A",{href:!0,class:!0});var k=$(e);t=z(k,"Period "),c=z(k,n),k.forEach(L),i=H(f),f.forEach(L),this.h()},h(){w(e,"href",m="/period/"+(s[0]+(s[12]+1))),w(e,"class","svelte-fxgp7d")},m(d,f){K(d,l,f),b(l,e),b(e,t),b(e,c),b(l,i),r||(_=re(e,"click",fe(p)),r=!0)},p(d,f){s=d,f&1&&n!==(n=s[0]+(s[12]+1)+"")&&V(c,n),f&1&&m!==(m="/period/"+(s[0]+(s[12]+1)))&&w(e,"href",m)},d(d){d&&L(l),r=!1,_()}}}function se(s){let l,e=s[0]+(s[12]+1)<=s[3]&&le(s);return{c(){e&&e.c(),l=j()},l(t){e&&e.l(t),l=j()},m(t,n){e&&e.m(t,n),K(t,l,n)},p(t,n){t[0]+(t[12]+1)<=t[3]?e?e.p(t,n):(e=le(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){t&&L(l),e&&e.d(t)}}}function ae(s){let l,e=[],t=new ue,n,c=S(s[2][s[0]-1]);const m=i=>i[13].TeamName;for(let i=0;i<c.length;i+=1){let r=Y(s,c,i),_=m(r);t.set(_,e[i]=oe(_,r))}return{c(){l=I("ul");for(let i=0;i<e.length;i+=1)e[i].c();n=D(),this.h()},l(i){l=R(i,"UL",{class:!0});var r=$(l);for(let _=0;_<e.length;_+=1)e[_].l(r);n=H(r),r.forEach(L),this.h()},h(){w(l,"class","teams svelte-fxgp7d")},m(i,r){K(i,l,r);for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(l,null);b(l,n)},p(i,r){r&5&&(c=S(i[2][i[0]-1]),e=he(e,r,m,1,i,c,t,l,ce,oe,n,Y))},d(i){i&&L(l);for(let r=0;r<e.length;r+=1)e[r].d()}}}function ie(s,l){let e,t,n,c,m,i,r=l[16].Name+"",_;return{key:s,first:null,c(){e=I("div"),t=I("img"),m=D(),i=I("p"),_=W(r),this.h()},l(p){e=R(p,"DIV",{class:!0});var d=$(e);t=R(d,"IMG",{src:!0,alt:!0,class:!0}),m=H(d),i=R(d,"P",{class:!0});var f=$(i);_=z(f,r),f.forEach(L),d.forEach(L),this.h()},h(){B(t.src,n="https://drive.google.com/thumbnail?id="+l[16].Photo)||w(t,"src",n),w(t,"alt",c=l[16].Name),w(t,"class","svelte-fxgp7d"),w(i,"class","svelte-fxgp7d"),w(e,"class","team svelte-fxgp7d"),this.first=e},m(p,d){K(p,e,d),b(e,t),b(e,m),b(e,i),b(i,_)},p(p,d){l=p,d&5&&!B(t.src,n="https://drive.google.com/thumbnail?id="+l[16].Photo)&&w(t,"src",n),d&5&&c!==(c=l[16].Name)&&w(t,"alt",c),d&5&&r!==(r=l[16].Name+"")&&V(_,r)},d(p){p&&L(e)}}}function oe(s,l){let e,t,n,c,m,i,r,_=l[13].TeamName+"",p,d,f=[],k=new ue,E=S(l[13].students);const T=v=>v[16].Name;for(let v=0;v<E.length;v+=1){let h=J(l,E,v),P=T(h);k.set(P,f[v]=ie(P,h))}return{key:s,first:null,c(){e=I("li"),t=I("img"),m=D(),i=I("div"),r=I("h3"),p=W(_),d=D();for(let v=0;v<f.length;v+=1)f[v].c();this.h()},l(v){e=R(v,"LI",{class:!0});var h=$(e);t=R(h,"IMG",{src:!0,alt:!0,class:!0}),m=H(h),i=R(h,"DIV",{class:!0});var P=$(i);r=R(P,"H3",{class:!0});var N=$(r);p=z(N,_),N.forEach(L),d=H(P);for(let o=0;o<f.length;o+=1)f[o].l(P);P.forEach(L),h.forEach(L),this.h()},h(){B(t.src,n="https://drive.google.com/thumbnail?id="+l[13].Team)||w(t,"src",n),w(t,"alt",c=l[13].Name),w(t,"class","svelte-fxgp7d"),w(r,"class","svelte-fxgp7d"),w(i,"class","team-data svelte-fxgp7d"),w(e,"class","svelte-fxgp7d"),this.first=e},m(v,h){K(v,e,h),b(e,t),b(e,m),b(e,i),b(i,r),b(r,p),b(i,d);for(let P=0;P<f.length;P+=1)f[P]&&f[P].m(i,null)},p(v,h){l=v,h&5&&!B(t.src,n="https://drive.google.com/thumbnail?id="+l[13].Team)&&w(t,"src",n),h&5&&c!==(c=l[13].Name)&&w(t,"alt",c),h&5&&_!==(_=l[13].TeamName+"")&&V(p,_),h&5&&(E=S(l[13].students),f=he(f,h,T,1,l,E,k,i,ce,ie,null,J))},d(v){v&&L(e);for(let h=0;h<f.length;h+=1)f[h].d()}}}function ne(s){let l,e=s[12]>=s[4]&&s[12]<s[1]&&ae(s);return{c(){e&&e.c(),l=j()},l(t){e&&e.l(t),l=j()},m(t,n){e&&e.m(t,n),K(t,l,n)},p(t,n){t[12]>=t[4]&&t[12]<t[1]?e?e.p(t,n):(e=ae(t),e.c(),e.m(l.parentNode,l)):e&&(e.d(1),e=null)},d(t){t&&L(l),e&&e.d(t)}}}function Pe(s){let l,e,t="Leaderboard -",n,c,m,i,r,_,p,d,f,k,E=S([3,2,1]),T=[];for(let o=0;o<3;o+=1)T[o]=te(x(s,E,o));let v=S(Array(3)),h=[];for(let o=0;o<v.length;o+=1)h[o]=se(Z(s,v,o));let P=S(s[2]),N=[];for(let o=0;o<P.length;o+=1)N[o]=ne(X(s,P,o));return{c(){l=I("div"),e=I("h1"),e.textContent=t,n=D(),c=I("ul");for(let o=0;o<3;o+=1)T[o].c();m=D(),i=I("li"),r=I("span"),_=W("Period "),p=W(s[0]),d=D();for(let o=0;o<h.length;o+=1)h[o].c();f=D();for(let o=0;o<N.length;o+=1)N[o].c();k=j(),this.h()},l(o){l=R(o,"DIV",{id:!0,class:!0});var y=$(l);e=R(y,"H1",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-ff54wo"&&(e.textContent=t),n=H(y),c=R(y,"UL",{class:!0});var a=$(c);for(let u=0;u<3;u+=1)T[u].l(a);m=H(a),i=R(a,"LI",{});var g=$(i);r=R(g,"SPAN",{class:!0});var M=$(r);_=z(M,"Period "),p=z(M,s[0]),M.forEach(L),g.forEach(L),d=H(a);for(let u=0;u<h.length;u+=1)h[u].l(a);a.forEach(L),y.forEach(L),f=H(o);for(let u=0;u<N.length;u+=1)N[u].l(o);k=j(),this.h()},h(){w(e,"class","svelte-fxgp7d"),w(r,"class","svelte-fxgp7d"),w(c,"class","svelte-fxgp7d"),w(l,"id","pagination"),w(l,"class","svelte-fxgp7d")},m(o,y){K(o,l,y),b(l,e),b(l,n),b(l,c);for(let a=0;a<3;a+=1)T[a]&&T[a].m(c,null);b(c,m),b(c,i),b(i,r),b(r,_),b(r,p),b(c,d);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(c,null);K(o,f,y);for(let a=0;a<N.length;a+=1)N[a]&&N[a].m(o,y);K(o,k,y)},p(o,[y]){if(y&33){E=S([3,2,1]);let a;for(a=0;a<3;a+=1){const g=x(o,E,a);T[a]?T[a].p(g,y):(T[a]=te(g),T[a].c(),T[a].m(c,m))}for(;a<3;a+=1)T[a].d(1)}if(y&1&&V(p,o[0]),y&41){v=S(Array(3));let a;for(a=0;a<v.length;a+=1){const g=Z(o,v,a);h[a]?h[a].p(g,y):(h[a]=se(g),h[a].c(),h[a].m(c,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=v.length}if(y&23){P=S(o[2]);let a;for(a=0;a<P.length;a+=1){const g=X(o,P,a);N[a]?N[a].p(g,y):(N[a]=ne(g),N[a].c(),N[a].m(k.parentNode,k))}for(;a<N.length;a+=1)N[a].d(1);N.length=P.length}},i:O,o:O,d(o){o&&(L(l),L(f),L(k)),Q(T,o),Q(h,o),Q(N,o)}}}let F=1;function Ne(s,l,e){let t,n,c=[],m=[],i=1,r=0,_=0;pe(async()=>{const k="1ktrTyIcfjtdgatYKf5E5hi3gOBzUr2bHnXgfmLFpG8c",E=encodeURIComponent("Leaderboard"),T=`https://docs.google.com/spreadsheets/d/${k}/gviz/tq?tqx=out:csv&sheet=${E}`,h=await(await fetch(T)).text(),[P,...N]=h.split(`
`),o=P.split(",").map(u=>u.replace(/"/g,""));c=N.map(u=>{const U=u.split(",").map(C=>C.replace(/"/g,""));let A=o.map(C=>C.replace(/"/g,"")).reduce((C,q,de)=>({...C,[q]:U[de]}),{});if(A.PhotoURL&&A.PhotoURL.startsWith("https://drive.google.com")){let q=new URL(A.PhotoURL).pathname.split("/");A.Photo=q[3]}if(A.TeamURL&&A.TeamURL.startsWith("https://drive.google.com")){let q=new URL(A.TeamURL).pathname.split("/");A.Team=q[3]}return A});let y=new Map,a=new Map,g=new Map;for(let u of c){let U=`${u.Period}`;y.has(U)||y.set(U,new Map);let G=y.get(U),A=`${u.TeamName}`;G.has(A)||G.set(A,u);let C=`${u.TeamName}-${u.Period}`;a.has(C)?a.set(C,a.get(C)+Number(u.Cash)):a.set(C,Number(u.Cash));let q=`${u.TeamName}-${u.Period}`;g.has(q)?g.get(q).push(u):g.set(q,[u])}let M=Array.from(y.values()).map(u=>{let U=Array.from(u.values());return U.sort((G,A)=>a.get(`${A.TeamName}-${A.Period}`)-a.get(`${G.TeamName}-${G.Period}`)),U});for(let u of M)for(let U of u)U.students=g.get(`${U.TeamName}-${U.Period}`);e(2,m=M),r=m.length,e(3,_=Math.ceil(r/F))});const p=k=>{e(0,i=k)},d=k=>p(i-k),f=k=>p(i+(k+1));return s.$$.update=()=>{s.$$.dirty&1&&e(1,t=i*F),s.$$.dirty&2&&e(4,n=t-F)},[i,t,m,_,n,p,d,f]}class Te extends ve{constructor(l){super(),ke(this,l,Ne,Pe,me,{})}}export{Te as component};
